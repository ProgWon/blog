---
title: "토스페이먼츠 결제 시스템 연동을 돕는 MCP 서버 구현기"
date: "2024-12-20"
description: "AI 기반 코딩 도구를 활용해서 토스페이먼츠 결제 시스템을 쉽고 빠르게 연동할 수 있도록, MCP 서버를 구현한 과정과 인사이트를 공유합니다."
tags: ["AI", "MCP", "개발"]
author: "김용성 · 토스페이먼츠 Node.js Developer"
---

안녕하세요, 토스페이먼츠 김용성입니다.

지난주, 토스페이먼츠에서 PG업계 최초로 MCP를 소개하면서 많은 분들이 관심가져 주셨는데요. 이 글을 통해 MCP 서버 구현 과정과 그 안에서 얻은 러닝을 공유하고자 해요.

## 요약

- 토스페이먼츠의 API 연동을 조금이라도 더 쉽고 빠르게 하기 위해, AI 기반 코딩 도구 활용시 도움이 될 수 있도록 토스페이먼츠 연동 MCP 서버를 제공합니다.
- 토스페이먼츠 연동 MCP 서버를 활용하면 AI 기반 코딩 도구를 단독으로 사용할 때보다 연동 코드 생성 정확도가 높아집니다.
- 본 글에는 코드가 많이 첨부되어 있어 내용이 길어요. 자세한 내용이 궁금하신 분은 PC 환경에서 읽어보시기를 권장드립니다.

## 구현 배경

토스페이먼츠는 출범 초기부터 어떻게 하면 고객사가 결제 시스템을 더 쉽게 연동할 수 있을지에 대한 고민이 많았습니다. 기존의 결제 시스템 연동 방식은 개발자에게 복잡하고 번거로운 작업이라는 인식을 풀어야 했기 때문이죠.

이 문제를 해결하기 위해 직관적인 API와 SDK를 새로 만들고, 토스페이먼츠 결제 시스템을 연동하는 개발자들을 위한 개발자 센터를 만드는 등 다양한 활동을 수행하였고, 개발자분들로부터 좋은 피드백을 받았습니다.

### MCP란?

MCP는 엔트로픽에서 제안한, 인공지능 모델(LLM)이 다양한 상황과 맥락을 잘 이해할 수 있도록 돕는 표준적인 방법입니다. USB가 컴퓨터와 주변기기들을 간편하게 연결할 수 있는 표준을 만들었던 것처럼, MCP는 AI 모델과 다양한 환경이 자연스럽게 연결될 수 있도록 돕습니다.

```javascript
// 토스페이먼츠 결제 연동 예시
const payment = TossPayments(clientKey);

const paymentWidget = payment.widgets({
  customerKey,
});

await paymentWidget.renderPaymentMethods("#payment-method", { value: amount });
```

## 양질의 콘텐츠 준비하기

MCP에서 가장 중요한 건, AI가 잘 이해할 수 있는 콘텐츠를 전달하는 것입니다. 하지만 모든 제품에 대해 콘텐츠를 개별적으로 제작하는 건 시간과 비용이 너무 많이 들죠.

> 다행히 저희는 이미 MDX 기반의 개발자 센터를 운영하고 있어서, 기존 문서들을 활용할 수 있었습니다.

<Ad />

## 테스트 결과

실제 테스트를 통해 다음과 같은 결과를 확인할 수 있었습니다:

### 1. Cursor 단독 사용

- 기본적인 SDK 주소조차 올바르지 않게 생성
- 결제 처리 Flow에서 일부 로직 오류 발생

### 2. Cursor + Docs Context 조합

- SDK 주소를 정확히 확인하지 못함
- 보안상 중요한 Secret Key가 클라이언트에 노출되는 문제

### 3. Cursor + MCP 조합

- 정확한 SDK 주소와 연동 스펙 생성
- 보안 가이드 제공 (Secret Key는 백엔드에서만 사용)
- 전체적인 결제 처리 흐름이 올바르게 구현

## 마치며

AI가 생성하는 코드가 100% 완벽하지는 않기에 당장 모든 어려움을 해소하기는 어렵겠지만, 앞으로 발전해 가면서 점차 더 많은 분들의 어려움을 낮추는데 도움이 될 거라 기대해요.

이번 경험이 저희와 유사한 고민을 하고 있는 분들께 실질적인 도움이 되었기를 바라며, 긴 글 읽어주셔서 감사합니다.
